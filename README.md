# Laravel API Project

## Описание Проекта

Этот проект представляет собой RESTful API, разработанный на фреймворке **Laravel**, предназначенный для управления статьями и пользовательской аутентификацией. В проекте реализована современная архитектура с использованием **Service Layer** для инкапсуляции бизнес-логики, **Form Requests** для валидации и **API Resources** для стандартизации ответов.

## Ключевые Возможности

- **Аутентификация (Laravel Sanctum):** Регистрация, вход и выход пользователей с использованием токенов.

- **Управление Статьями (CRUD):** Полный набор операций для создания, чтения, обновления и удаления статей.

- **Система Лайков:** Пользователи могут ставить и убирать лайки статьям.

- **Чистая Архитектура:** Разделение ответственности с помощью Service Layer.

- **Валидация:** Использование Form Requests для строгой и чистой валидации входящих данных.

## Технологии

- **PHP**

- **Laravel Framework**

- **Laravel Sanctum** (для аутентификации API)

- **Docker** и **Laravel Sail** (для локальной разработки)

- **PostgreSQL** (конфигурация по умолчанию для Sail)

## Установка и Запуск с использованием Laravel Sail

Для запуска проекта локально с использованием Docker и Laravel Sail выполните следующие шаги:

### 1. Клонирование репозитория

```bash
git clone https://github.com/AlexandrStrelnikovv/Laravel-api-project.git
cd Laravel-api-project
```

### 2. Настройка окружения

Создайте файл `.env` на основе примера:

```bash
cp .env.example .env
```

Отредактируйте файл `.env`, указав данные для подключения к базе данных, как это принято в окружении Sail (PostgreSQL):

```
DB_CONNECTION=pgsql
DB_HOST=pgsql
DB_PORT=5432
DB_DATABASE=apiproject
DB_USERNAME=sail
DB_PASSWORD=password
```

### 3. Запуск Docker контейнеров

Запустите контейнеры с помощью Sail. Это также установит необходимые зависимости, если они еще не установлены.

```bash
./vendor/bin/sail up -d
```

*Используйте **`-d`** для запуска в фоновом режиме.*

### 4. Установка зависимостей

Установите все необходимые PHP-зависимости с помощью Composer внутри контейнера:

```bash
./vendor/bin/sail composer install
```

### 5. Генерация ключа приложения

Сгенерируйте ключ приложения:

```bash
./vendor/bin/sail artisan key:generate
```

### 6. Миграции базы данных

Выполните миграции для создания необходимых таблиц (пользователи, статьи, лайки):

```bash
./vendor/bin/sail artisan migrate
```

Проект будет доступен по адресу `http://localhost` (или по адресу, указанному в вашем `.env` файле).

## API Эндпоинты

Ниже приведены основные маршруты API. Все маршруты API имеют префикс `/api`.

| Категория | Метод | Маршрут | Описание | Требуется Аутентификация |
| --- | --- | --- | --- | --- |
| **Аутентификация** | `POST` | `/api/register` | Регистрация нового пользователя. | Нет |
|  | `POST` | `/api/login` | Вход пользователя и получение токена Sanctum. | Нет |
|  | `POST` | `/api/logout` | Выход пользователя (отзыв токена). | Да |
| **Статьи** | `GET` | `/api/articles` | Получить список всех статей. | Нет |
|  | `POST` | `/api/articles` | Создать новую статью. | Да |
|  | `GET` | `/api/articles/{id}` | Получить статью по ID. | Нет |
|  | `PUT/PATCH` | `/api/articles/{id}` | Обновить статью по ID. | Да (только автор) |
|  | `DELETE` | `/api/articles/{id}` | Удалить статью по ID. | Да (только автор) |
| **Лайки** | `POST` | `/api/articles/{id}/like` | Поставить лайк статье. | Да |
|  | `DELETE` | `/api/articles/{id}/like` | Убрать лайк со статьи. | Да |

## Структура Проекта

Проект использует следующие архитектурные решения:

- **`app/Http/Controllers`**: Содержит контроллеры (`ArticleController`, `AuthController`), которые делегируют бизнес-логику сервисам.

- **`app/Services`**: Содержит `ArticleService`, где инкапсулирована вся бизнес-логика, связанная со статьями (CRUD, лайки).

- **`app/Http/Requests`**: Содержит Form Requests для валидации входящих данных.

- **`app/Http/Resources`**: Содержит API Resources для форматирования ответов.

- **`app/Models`**: Содержит модели Eloquent (`User`, `Article`, `ArticleLikes`).

- **`routes/api.php`**: Определяет все маршруты API.
.
